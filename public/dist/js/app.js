"use strict";var app={init:function(){this.initEvents(),this.initAjax()},initEvents:function(){document.addEventListener("click",function(t){var e,a,n,s=t.target,i=t.target.parentElement,r=t.target.parentElement.parentElement;s&&"addtocart"==s.className&&(e=parseInt(r.parentElement.getElementsByClassName("off")[0].innerHTML.split("%")[0]),t=parseInt(i.getElementsByClassName("actual")[0].innerHTML.split("$")[1])*e/100,e="",e+='<ul class="itemslist" data-name="'+r.getElementsByTagName("h5")[0].innerHTML+'" data-actualprice="'+i.getElementsByClassName("actual")[0].innerHTML+'" data-discount="'+t+'" data-actualpricenochange="'+i.getElementsByClassName("actual")[0].innerHTML+'" data-discountnochange="'+t+'">',e+='<li><img src="'+r.parentElement.getElementsByTagName("img")[0].src+'"> <span class="title">'+r.getElementsByTagName("h5")[0].innerHTML+'</span><span class="close"> X</span></li>',e+="<li>",e+='<span class="minus">-</span>',e+='<span class="quantity">1</span>',e+='<span class="plus">+</span>',e+="</li>",e+="<li>"+i.getElementsByClassName("actual")[0].innerHTML+"</li>",e+="</ul>",document.getElementsByClassName("total-items")[0].innerHTML+=e,app.addedtoCartMessage(document.getElementsByClassName("items")[0],r.getElementsByTagName("h5")[0]),app.totalItems(),app.totalPrice()),s&&"plus"==s.className&&(i.querySelector(".quantity").innerHTML=parseInt(i.querySelector(".quantity").innerHTML)+1,i.nextSibling.innerHTML="$"+(parseInt(i.nextSibling.innerHTML.split("$")[1])+parseInt(r.getAttribute("data-actualpricenochange").split("$")[1])),a="$"+(parseInt(r.getAttribute("data-actualprice").split("$")[1])+parseInt(r.getAttribute("data-actualpricenochange").split("$")[1])),r.setAttribute("data-actualprice",a),n=parseInt(r.getAttribute("data-discount"))+parseInt(r.getAttribute("data-discountnochange")),r.setAttribute("data-discount",n),app.totalItems(),app.totalPrice()),s&&"minus"==s.className&&(1==s.nextSibling.innerHTML&&r.remove(),i.querySelector(".quantity").innerHTML=parseInt(i.querySelector(".quantity").innerHTML)-1,i.nextSibling.innerHTML="$"+(parseInt(r.getAttribute("data-actualprice").split("$")[1])-parseInt(r.getAttribute("data-actualpricenochange").split("$")[1])),a="$"+(parseInt(r.getAttribute("data-actualprice").split("$")[1])-parseInt(r.getAttribute("data-actualpricenochange").split("$")[1])),r.setAttribute("data-actualprice",a),n=parseInt(r.getAttribute("data-discount"))-parseInt(r.getAttribute("data-discountnochange")),r.setAttribute("data-discount",n),app.totalItems(),app.totalPrice()),s&&"close"==s.className&&(s.parentElement.parentElement.remove(),app.totalItems(),app.totalPrice())})},addedtoCartMessage:function(t,e){t.style.display="block",t.innerHTML=e.innerHTML+" is added to cart",setTimeout(function(){t.style.display="none"},1500)},totalItems:function(){for(var t=document.querySelectorAll(".total-quantity"),e=document.getElementsByClassName("quantity"),a=0,n=0;n<e.length;n++)a+=parseInt(e[n].innerHTML);for(n=0;n<t.length;n++)t[n].innerHTML="("+a+")"},totalPrice:function(){for(var t=document.querySelector(".total-amount"),e=document.querySelector(".total-discount"),a=document.getElementsByClassName("itemslist"),n=document.querySelector(".total-order-amount"),s=0,i=0,r=0;r<a.length;r++)s+=parseInt(a[r].getAttribute("data-actualprice").split("$")[1]),i+=parseInt(a[r].getAttribute("data-discount"));t.innerHTML="$"+s,e.innerHTML="-$"+i,n.innerHTML="$"+(s-i)},initAjax:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===this.readyState&&200===this.status)for(var t=JSON.parse(this.responseText).items,e=0;e<t.length;e++){var a="";a+='<div class="content">',a+='<span class="off">'+t[e].discount+"% off</span>",a+='<img src="'+t[e].image+'" alt="" width="100%">',a+='<div class="details">',a+="<h5>"+t[e].name+"</h5>",a+='<div class="values">',a+='<span class="discount"> $'+t[e].price.display+"</span>",a+='<span class="actual"> $'+t[e].price.actual+"</span>",a+='<button type="submit" class="addtocart">Add to cart</button>',a+="</div>",a+="</div>",document.getElementsByClassName("cart-container")[0].innerHTML+=a}},t.open("GET","dist/js/cart.json"),t.send()}};app.init();